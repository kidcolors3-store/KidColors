<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style.css">
    <title>Your Cart | KidColors</title>
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <style>
        
        .remove-icon-btn {
            color: #ff5e5e; 
            font-size: 35px; 
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            padding: 0 5px;
            transition: 0.2s;
            line-height: 1;
            display: flex;
            align-items: center;
        }
        .remove-icon-btn:hover {
            color: #ff0000;
            transform: scale(1.1);
        }

      
        .price-text {
            font-size: 1rem;
            font-weight: 700;
            color: #333;
            display: block;
        }

 
        .qty-box-design {
            display: flex; 
            align-items: center; 
            gap: 6px; 
            margin: 3px 0; 
            background: #fff5f5; 
            width: fit-content; 
            padding: 2px 8px; 
            border-radius: 8px; 
            border: 1px solid #fceaea;
        }

        .qty-num {
            font-weight: bold; 
            font-size: 0.9rem; 
            color: #333;
        }

        .arrow-btn {
            font-size: 11px; 
            color: #ffbaba;
            cursor: pointer;
            line-height: 0.9;
        }

        .cart-item {
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            padding: 12px; 
            border-bottom: 1px solid #eee; 
            background: white; 
            margin-bottom: 10px; 
            border-radius: 15px;
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="logo-area">
            <img src="images/logo.png.png" alt="Logo" class="logo"> 
            <div>
                <h1>Kidcolors</h1>
                <p>Cute Aesthetic Coloring Adventures</p>
            </div>
        </div>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="shop.html">Shop</a>
           
    
        </nav>
    </header>

    <main class="content-area">
        <h2 class="contact-title">Your Shopping Cart üõí</h2>

        <div id="cart-items-container" class="main-cart-box" style="min-height: 100px;"></div>

        <div class="cart-summary">
            <p><strong>Total: <span id="cart-total-price">0</span> PKR</strong></p>
            
            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
                <a href="shop.html" class="add-more-link">
                    <button class="add-more-btn">Add More Product</button>
                </a>
                <button class="add-to-cart-btn" onclick="goToCheckout()">Proceed to Checkout</button>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>¬© 2026 kidcolors3@gmail.com ‚Äî All Rights Reserved</p>
    </footer>

    <script>
      function displayCart() {
    let cart = JSON.parse(localStorage.getItem('myCart')) || [];
    let container = document.getElementById('cart-items-container');
    let totalDisplay = document.getElementById('cart-total-price');
    let total = 0;

    if (cart.length === 0) {
        container.innerHTML = "<p style='text-align:center; padding:20px;'>Aapka cart khali hai! üõçÔ∏è</p>";
    
        localStorage.setItem('cartTotal', "0");
        return;
    }

    container.innerHTML = ""; 
    cart.forEach((item, index) => {
        if (!item.qty) { item.qty = 1; }
        let itemTotal = parseFloat(item.price) * item.qty;
        total += itemTotal;

        container.innerHTML += `
            <div class="cart-item">
                <img src="${item.image}" width="65" style="border-radius:10px;">
                <div style="flex-grow: 1; text-align: left; padding-left: 12px; display: flex; flex-direction: column; justify-content: center;">
                    <h4 style="margin: 0; font-size: 1rem; color: #a68686;">${item.name}</h4>
                    <div class="qty-box-design">
                        <span class="qty-num">${item.qty}</span>
                        <div style="display: flex; flex-direction: column;">
                            <span class="arrow-btn" onclick="updateQty(${index}, 1)">‚ñ≤</span>
                            <span class="arrow-btn" onclick="updateQty(${index}, -1)">‚ñº</span>
                        </div>
                    </div>
                    <span class="price-text">Rs. ${item.price}</span>
                </div>
                <div class="remove-icon-btn" onclick="removeItem(${index})">√ó</div>
            </div>`;
    }); 

    totalDisplay.innerText = total.toFixed(0);
    localStorage.setItem('cartTotal', total.toFixed(0));
}
        function updateQty(index, change) {
            let cart = JSON.parse(localStorage.getItem('myCart')) || [];
            if (!cart[index].qty) cart[index].qty = 1;
            cart[index].qty += change;
            if (cart[index].qty < 1) cart[index].qty = 1;
            localStorage.setItem('myCart', JSON.stringify(cart));
            displayCart();
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('myCart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('myCart', JSON.stringify(cart));
            displayCart();
        }

        window.onload = displayCart;

        function goToCheckout() {
            let cart = JSON.parse(localStorage.getItem('myCart')) || [];
            if (cart.length === 0) { alert("Cart khali hai!"); return; }
            window.location.href = 'checkout.html';
        }
    </script>

</body>
</html>